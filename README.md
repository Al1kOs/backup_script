# üöÄ –°–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è Linux

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –±—ç–∫–∞–ø–æ–≤ Linux —Å–∏—Å—Ç–µ–º —á–µ—Ä–µ–∑ SSH. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–µ, –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ –∏ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏.

## üìÅ –§–∞–π–ª—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:
- **`backup_system.sh`** - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤ —Å–∏—Å—Ç–µ–º—ã —Å –ø–æ–º–æ—â—å—é dd
- **`restore_system.sh`** - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏–∑ –±—ç–∫–∞–ø–∞ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **`incremental_backup.sh`** - –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ –∏ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã
- **`network_config.sh`** - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏
- **`system_check.sh`** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–¥ –±—ç–∫–∞–ø–æ–º
- **`backup_automation.sh`** - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

### üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **`backup_excludes.txt`** - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –±—ç–∫–∞–ø–æ–≤
- **`restore.conf.example`** - –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- **`README.md`** - –î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
- **`install.sh`** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- **`uninstall.sh`** - –£–¥–∞–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- **`Makefile`** - –£–¥–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã make

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### üñ•Ô∏è –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (–æ—Ç–∫—É–¥–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Å–∫—Ä–∏–ø—Ç—ã)
- **Bash 4.0+** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è bash
- **SSH –∫–ª–∏–µ–Ω—Ç** - –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —É–¥–∞–ª–µ–Ω–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–∞–º
- **SCP** - –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- **–£—Ç–∏–ª–∏—Ç—ã**: tar, gzip, bzip2, xz, sha256sum
- **–î–æ—Å—Ç—É–ø –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É** –ø–æ SSH

### üñ•Ô∏è –ù–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- **SSH —Å–µ—Ä–≤–µ—Ä** - –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **–£—Ç–∏–ª–∏—Ç—ã**: dd, lsblk, df, mount
- **–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞** –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- **–ü—Ä–∞–≤–∞ root** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–æ–≤

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
git clone https://github.com/Al1kOs/backup_script
cd backup_script

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
make install

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (—Ç—Ä–µ–±—É–µ—Ç root)
sudo make install-system
```

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:
1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã** –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
2. **–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏**:
   ```bash
   chmod +x *.sh
   ```
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –∫–ª—é—á–∏** –¥–ª—è –±–µ—Å–ø–∞—Ä–æ–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∫–ª—é—á–µ–π:
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH –∫–ª—é—á–∞ (–µ—Å–ª–∏ –Ω–µ—Ç)
ssh-keygen -t rsa -b 4096 -f ~/.ssh/backup_key

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
ssh-copy-id -i ~/.ssh/backup_key.pub user@remote-server

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ssh -i ~/.ssh/backup_key user@remote-server
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –±—ç–∫–∞–ø
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–¥ –±—ç–∫–∞–ø–æ–º
./system_check.sh -h 192.168.1.100 -k ~/.ssh/backup_key -v

# 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞
./backup_system.sh -h 192.168.1.100 -k ~/.ssh/backup_key -d ./backups -c xz -v

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞
ls -la ./backups/
sha256sum -c ./backups/*.sha256
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ –±—ç–∫–∞–ø—ã
```bash
# –ü–µ—Ä–≤—ã–π –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø
./incremental_backup.sh -h 192.168.1.100 -t full -k ~/.ssh/backup_key

# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ –±—ç–∫–∞–ø—ã
./incremental_backup.sh -h 192.168.1.100 -t incremental -k ~/.ssh/backup_key

# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã
./incremental_backup.sh -h 192.168.1.100 -t differential -k ~/.ssh/backup_key
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
cp restore.conf.example restore.conf
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ restore.conf —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

# 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
./restore_system.sh -b ./backups/system_backup_20231201_120000.img.gz \
                    -t 192.168.1.200 -d /dev/sda -f restore.conf
```

### 1. üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–¥ –±—ç–∫–∞–ø–æ–º

```bash
# –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
./system_check.sh -h 192.168.1.100

# –ü–æ–¥—Ä–æ–±–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å SSH –∫–ª—é—á–æ–º
./system_check.sh -h 192.168.1.100 -k ~/.ssh/backup_key -v

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏
./system_check.sh -h 192.168.1.100 -d 50 -r 4 -k ~/.ssh/backup_key
```

**–û–ø—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `-h, --host` - IP –∞–¥—Ä–µ—Å –∏–ª–∏ hostname —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- `-u, --user` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: root)
- `-p, --port` - SSH –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 22)
- `-k, --key` - –ü—É—Ç—å –∫ SSH –∫–ª—é—á—É
- `-d, --disk-space` - –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –≤ GB (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)
- `-r, --ram` - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º RAM –≤ GB (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1)
- `-v, --verbose` - –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥

### 2. üíæ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞ —Å–∏—Å—Ç–µ–º—ã

```bash
# –ë–∞–∑–æ–≤—ã–π –±—ç–∫–∞–ø
./backup_system.sh -h 192.168.1.100 -u root -k ~/.ssh/backup_key

# –ë—ç–∫–∞–ø —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ —Ç–∏–ø–∞ —Å–∂–∞—Ç–∏—è
./backup_system.sh -h server.example.com -d /mnt/backups -c xz -v

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
./backup_system.sh -h 192.168.1.100 --dry-run

# –ë—ç–∫–∞–ø —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º SSH –ø–æ—Ä—Ç–æ–º
./backup_system.sh -h 192.168.1.100 -p 2222 -k ~/.ssh/backup_key
```

**–û–ø—Ü–∏–∏ –±—ç–∫–∞–ø–∞:**
- `-h, --host` - IP –∞–¥—Ä–µ—Å –∏–ª–∏ hostname —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- `-u, --user` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: root)
- `-p, --port` - SSH –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 22)
- `-k, --key` - –ü—É—Ç—å –∫ SSH –∫–ª—é—á—É
- `-d, --dir` - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±—ç–∫–∞–ø–æ–≤
- `-c, --compression` - –¢–∏–ø —Å–∂–∞—Ç–∏—è: gzip, bzip2, xz
- `-v, --verbose` - –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
- `--dry-run` - –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 3. üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏–∑ –±—ç–∫–∞–ø–∞

```bash
# –ë–∞–∑–æ–≤–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
./restore_system.sh -b ./backups/system_backup_20231201_120000.img.gz \
                    -t 192.168.1.100 -d /dev/sda

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
./restore_system.sh -b backup.img.gz -t server.example.com -d /dev/sda \
                    -H newserver -i 192.168.1.200 -g 192.168.1.1

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–µ—Ç–∏
./restore_system.sh -b backup.img.gz -t 192.168.1.100 -d /dev/sda --skip-network

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –ø–æ–ª–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —Å–µ—Ç–∏
./restore_system.sh -b backup.img.gz -t 192.168.1.200 -d /dev/sda \
                    -H webserver -i 192.168.1.200 -m 255.255.255.0 \
                    -g 192.168.1.1 -n 8.8.8.8,8.8.4.4
```

**–û–ø—Ü–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**
- `-b, --backup` - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –±—ç–∫–∞–ø–∞
- `-t, --target` - IP –∞–¥—Ä–µ—Å –∏–ª–∏ hostname —Ü–µ–ª–µ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- `-d, --device` - –¶–µ–ª–µ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- `-u, --user` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: root)
- `-p, --port` - SSH –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 22)
- `-k, --key` - –ü—É—Ç—å –∫ SSH –∫–ª—é—á—É
- `-H, --hostname` - –ù–æ–≤—ã–π hostname
- `-i, --ip` - –ù–æ–≤—ã–π IP –∞–¥—Ä–µ—Å
- `-m, --netmask` - –ù–æ–≤–∞—è –º–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏
- `-g, --gateway` - –ù–æ–≤—ã–π —à–ª—é–∑
- `-n, --dns` - –ù–æ–≤—ã–µ DNS —Å–µ—Ä–≤–µ—Ä—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
- `--skip-network` - –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Å–µ—Ç–∏
- `-v, --verbose` - –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
- `--dry-run` - –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 4. üìà –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ –±—ç–∫–∞–ø—ã

```bash
# –ü–æ–ª–Ω—ã–π –±—ç–∫–∞–ø
./incremental_backup.sh -h 192.168.1.100 -t full -k ~/.ssh/backup_key

# –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–π –±—ç–∫–∞–ø
./incremental_backup.sh -h 192.168.1.100 -t incremental -k ~/.ssh/backup_key

# –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø
./incremental_backup.sh -h 192.168.1.100 -t differential -k ~/.ssh/backup_key

# –ë—ç–∫–∞–ø —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏
./incremental_backup.sh -h 192.168.1.100 -t full -e custom_excludes.txt

# –ë—ç–∫–∞–ø —Å –¥–ª–∏—Ç–µ–ª—å–Ω—ã–º —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
./incremental_backup.sh -h 192.168.1.100 -t full -r 90

# –ë—ç–∫–∞–ø —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Å–∂–∞—Ç–∏–µ–º
./incremental_backup.sh -h 192.168.1.100 -t full -c xz -k ~/.ssh/backup_key
```

**–û–ø—Ü–∏–∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤:**
- `-h, --host` - IP –∞–¥—Ä–µ—Å –∏–ª–∏ hostname —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- `-u, --user` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: root)
- `-p, --port` - SSH –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 22)
- `-k, --key` - –ü—É—Ç—å –∫ SSH –∫–ª—é—á—É
- `-d, --dir` - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±—ç–∫–∞–ø–æ–≤
- `-t, --type` - –¢–∏–ø –±—ç–∫–∞–ø–∞: full, incremental, differential
- `-r, --retention` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è –±—ç–∫–∞–ø–æ–≤
- `-e, --exclude` - –§–∞–π–ª —Å –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏
- `-c, --compression` - –¢–∏–ø —Å–∂–∞—Ç–∏—è: gzip, bzip2, xz
- `-v, --verbose` - –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
- `--dry-run` - –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 5. üåê –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

```bash
# –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ hostname
./network_config.sh -H newserver

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ IP –∏ hostname
./network_config.sh -H webserver -i 192.168.1.100

# –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏
./network_config.sh -H dbserver -i 10.0.0.50 -m 255.255.255.0 \
                    -g 10.0.0.1 -n 8.8.8.8,8.8.4.4

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
./network_config.sh -H testserver -i 192.168.1.200 --dry-run

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
./network_config.sh -H webserver -i 192.168.1.100 -I eth1
```

**–û–ø—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏:**
- `-H, --hostname` - –ù–æ–≤—ã–π hostname
- `-i, --ip` - –ù–æ–≤—ã–π IP –∞–¥—Ä–µ—Å
- `-m, --netmask` - –ù–æ–≤–∞—è –º–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 255.255.255.0)
- `-g, --gateway` - –ù–æ–≤—ã–π —à–ª—é–∑
- `-n, --dns` - –ù–æ–≤—ã–µ DNS —Å–µ—Ä–≤–µ—Ä—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 8.8.8.8,8.8.4.4)
- `-I, --interface` - –°–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω)
- `-v, --verbose` - –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
- `--dry-run` - –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 6. ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±—ç–∫–∞–ø–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
./backup_automation.sh --mode check -h 192.168.1.100 -k ~/.ssh/backup_key

# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
./backup_automation.sh --mode backup -h 192.168.1.100 -k ~/.ssh/backup_key

# –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –ø—Ä–æ–≤–µ—Ä–∫–∞ -> –±—ç–∫–∞–ø -> –ø—Ä–æ–≤–µ—Ä–∫–∞
./backup_automation.sh --mode full-cycle -h 192.168.1.100 -k ~/.ssh/backup_key

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
./backup_automation.sh --mode restore -h 192.168.1.200 -f restore.conf
```

**–†–µ–∂–∏–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:**
- `--mode check` - –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- `--mode backup` - –ü—Ä–æ–≤–µ—Ä–∫–∞ + —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
- `--mode restore` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- `--mode full-cycle` - –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –±—ç–∫–∞–ø–∞

### 7. üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
make install

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (—Ç—Ä–µ–±—É–µ—Ç root)
sudo make install-system

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
make status

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤
make test

# –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
make clean

# –£–¥–∞–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
make uninstall
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã make:**
- `install` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- `install-system` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- `install-user` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `install-dev` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `status` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- `test` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤
- `lint` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ —Å shellcheck
- `format` - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- `clean` - –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- `uninstall` - –£–¥–∞–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- `uninstall-force` - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—ç–∫–∞–ø–æ–≤

### –ü–æ–ª–Ω—ã–µ –±—ç–∫–∞–ø—ã (backup_system.sh)
```
backups/
‚îú‚îÄ‚îÄ system_backup_20231201_120000.img.gz
‚îú‚îÄ‚îÄ system_backup_20231201_120000.img.gz.sha256
‚îî‚îÄ‚îÄ system_backup_20231201_120000.meta
```

### –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ –±—ç–∫–∞–ø—ã (incremental_backup.sh)
```
incremental_backups/
‚îú‚îÄ‚îÄ full/
‚îÇ   ‚îú‚îÄ‚îÄ full_backup_20231201_120000.tar.gz
‚îÇ   ‚îî‚îÄ‚îÄ full_backup_20231201_120000.tar.gz.sha256
‚îú‚îÄ‚îÄ incremental/
‚îÇ   ‚îú‚îÄ‚îÄ incremental_backup_20231202_120000.tar.gz
‚îÇ   ‚îî‚îÄ‚îÄ incremental_backup_20231202_120000.tar.gz.sha256
‚îú‚îÄ‚îÄ differential/
‚îÇ   ‚îú‚îÄ‚îÄ differential_backup_20231203_120000.tar.gz
‚îÇ   ‚îî‚îÄ‚îÄ differential_backup_20231203_120000.tar.gz.sha256
‚îî‚îÄ‚îÄ metadata/
    ‚îú‚îÄ‚îÄ last_full_backup
    ‚îî‚îÄ‚îÄ *.meta
```

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ú–∏–≥—Ä–∞—Ü–∏—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

**–ó–∞–¥–∞—á–∞**: –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä —Å IP 192.168.1.100 –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä —Å IP 192.168.1.200

```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
./backup_system.sh -h 192.168.1.100 -k ~/.ssh/backup_key -d ./migration -c xz -v

# 2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
cat > restore.conf << 'EOF'
BACKUP_FILE="./migration/system_backup_20231201_120000.img.gz"
TARGET_DEVICE="/dev/sda"
NEW_HOSTNAME="webserver-new"
NEW_IP="192.168.1.200"
NEW_NETMASK="255.255.255.0"
NEW_GATEWAY="192.168.1.1"
NEW_DNS="8.8.8.8,8.8.4.4"
EOF

# 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
./restore_system.sh -b ./migration/system_backup_20231201_120000.img.gz \
                    -t 192.168.1.200 -d /dev/sda -f restore.conf
```

### –ü—Ä–∏–º–µ—Ä 2: –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–∞

**–ó–∞–¥–∞—á–∞**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ –±—ç–∫–∞–ø—ã —Å –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª–Ω—ã–º–∏

```bash
# 1. –ü–µ—Ä–≤—ã–π –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø
./incremental_backup.sh -h prod-server.example.com -t full -k ~/.ssh/prod_key

# 2. –°–æ–∑–¥–∞–Ω–∏–µ cron –∑–∞–¥–∞–Ω–∏–π
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–π –±—ç–∫–∞–ø –≤ 2:00
0 2 * * * /usr/local/bin/incremental_backup.sh -h prod-server.example.com -t incremental -k ~/.ssh/prod_key

# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø –≤ 3:00 –ø–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—è–º
0 3 * * 0 /usr/local/bin/incremental_backup.sh -h prod-server.example.com -t full -k ~/.ssh/prod_key

# –ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤
0 4 1 * * find /backups -name "*.tar.*" -mtime +90 -delete
```

### –ü—Ä–∏–º–µ—Ä 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—è

**–ó–∞–¥–∞—á–∞**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—è

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤
ls -la ./backups/
cat ./backups/*.meta | grep -E "(TIMESTAMP|HOSTNAME|BACKUP_DATE)"

# 2. –í—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –±—ç–∫–∞–ø–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π)
BACKUP_FILE="./backups/system_backup_20231130_120000.img.gz"

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
cd ./backups
sha256sum -c system_backup_20231130_120000.img.gz.sha256

# 4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ç–µ–∫—É—â–∏—Ö —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
./restore_system.sh -b $BACKUP_FILE -t 192.168.1.100 -d /dev/sda --skip-network

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
./system_check.sh -h 192.168.1.100 -k ~/.ssh/backup_key
```

### –ü—Ä–∏–º–µ—Ä 4: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ó–∞–¥–∞—á–∞**: –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∫–æ–ø–∏—é –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–∞

```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–∞
./backup_system.sh -h prod-server.example.com -k ~/.ssh/prod_key -d ./cloning

# 2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
cat > test-restore.conf << 'EOF'
BACKUP_FILE="./cloning/system_backup_20231201_120000.img.gz"
TARGET_DEVICE="/dev/sda"
NEW_HOSTNAME="test-server"
NEW_IP="192.168.2.100"
NEW_NETMASK="255.255.255.0"
NEW_GATEWAY="192.168.2.1"
NEW_DNS="8.8.8.8,8.8.4.4"
EOF

# 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
./restore_system.sh -b ./cloning/system_backup_20231201_120000.img.gz \
                    -t 192.168.2.100 -d /dev/sda -f test-restore.conf

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
./system_check.sh -h 192.168.2.100 -k ~/.ssh/test_key
```

### –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ –±—ç–∫–∞–ø—ã (incremental_backup.sh)
```
incremental_backups/
‚îú‚îÄ‚îÄ full/
‚îÇ   ‚îú‚îÄ‚îÄ full_backup_20231201_120000.tar.gz
‚îÇ   ‚îî‚îÄ‚îÄ full_backup_20231201_120000.tar.gz.sha256
‚îú‚îÄ‚îÄ incremental/
‚îÇ   ‚îú‚îÄ‚îÄ incremental_backup_20231202_120000.tar.gz
‚îÇ   ‚îî‚îÄ‚îÄ incremental_backup_20231202_120000.tar.gz.sha256
‚îú‚îÄ‚îÄ differential/
‚îÇ   ‚îú‚îÄ‚îÄ differential_backup_20231203_120000.tar.gz
‚îÇ   ‚îî‚îÄ‚îÄ differential_backup_20231203_120000.tar.gz.sha256
‚îî‚îÄ‚îÄ metadata/
    ‚îú‚îÄ‚îÄ last_full_backup
    ‚îî‚îÄ‚îÄ *.meta
```

## üìã –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –±—ç–∫–∞–ø–æ–≤

–ö–∞–∂–¥—ã–π –±—ç–∫–∞–ø —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ:

### –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- **TIMESTAMP** - –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–∞
- **BACKUP_TYPE** - –¢–∏–ø –±—ç–∫–∞–ø–∞ (full, incremental, differential)
- **HOSTNAME** - –ò–º—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- **USER** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —Å–æ–∑–¥–∞–≤—à–∏–π –±—ç–∫–∞–ø
- **BACKUP_DATE** - –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- **COMPRESSION** - –¢–∏–ø —Å–∂–∞—Ç–∏—è

### –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- **–í–µ—Ä—Å–∏—è —è–¥—Ä–∞** - uname -a
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∏—Å–∫–∞—Ö** - lsblk –≤—ã–≤–æ–¥
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–∑–¥–µ–ª–∞—Ö** - –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã
- **–°–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - IP –∞–¥—Ä–µ—Å–∞ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- **–†–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞** - –û–±—â–∏–π –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–º

### –ü—Ä–∏–º–µ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –±—ç–∫–∞–ø–∞
cat ./backups/system_backup_20231201_120000.meta

# –ü–æ–∏—Å–∫ –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º
grep "HOSTNAME" ./backups/*.meta
grep "BACKUP_DATE" ./backups/*.meta | sort
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –¥–æ—Å—Ç—É–ø:
- **SSH –∫–ª—é—á–∏** - –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç SSH –∫–ª—é—á–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ root –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SSH –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö:
- **–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã** - SHA256 –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –±—ç–∫–∞–ø–æ–≤
- **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Å—É–º–º –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º –±—ç–∫–∞–ø–µ

### –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:
- **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- **–ò–∑–æ–ª—è—Ü–∏—è** - –ö–∞–∂–¥—ã–π –±—ç–∫–∞–ø –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –∏ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö SSH –∫–ª—é—á–µ–π –¥–ª—è –±—ç–∫–∞–ø–æ–≤
ssh-keygen -t rsa -b 4096 -f ~/.ssh/backup_key -C "backup-system"

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤ SSH –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
# –í ~/.ssh/authorized_keys –¥–æ–±–∞–≤–∏—Ç—å:
command="/usr/local/bin/backup-command" ssh-rsa AAAAB3NzaC1yc2E...

# –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π
# –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ –∫–ª—é—á–∏ –∫–∞–∂–¥—ã–µ 3-6 –º–µ—Å—è—Ü–µ–≤
```

## ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### Cron –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤

```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø –≤ 2:00
0 2 * * * /usr/local/bin/backup_system.sh -h 192.168.1.100 -d /mnt/backups -k ~/.ssh/backup_key

# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–π –±—ç–∫–∞–ø –≤ 3:00
0 3 * * * /usr/local/bin/incremental_backup.sh -h 192.168.1.100 -t incremental -k ~/.ssh/backup_key

# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø –≤ 4:00 –ø–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—è–º
0 4 * * 0 /usr/local/bin/incremental_backup.sh -h 192.168.1.100 -t differential -k ~/.ssh/backup_key

# –ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤ –≤ 5:00 –ø–µ—Ä–≤–æ–≥–æ —á–∏—Å–ª–∞ –º–µ—Å—è—Ü–∞
0 5 1 * * find /mnt/backups -name "*.tar.*" -mtime +90 -delete
```

### Systemd —Ç–∞–π–º–µ—Ä—ã

```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
sudo systemctl enable backup-system.timer
sudo systemctl start backup-system.timer

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status backup-system.timer
sudo systemctl list-timers backup-system.timer

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –±—ç–∫–∞–ø–∞
sudo systemctl start backup-system.service
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Makefile

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ cron –∑–∞–¥–∞–Ω–∏–π
make install-cron

# –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–æ–≤
make install-systemd

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤
make setup-automation
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –±—ç–∫–∞–ø–æ–≤
find /mnt/backups -name "*.meta" -exec cat {} \; | grep -E "(TIMESTAMP|BACKUP_DATE)" | sort -r

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –±—ç–∫–∞–ø–æ–≤
du -sh /mnt/backups/*/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
tail -f /var/log/backup-system/backup-system.log
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞—é—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤:

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ /etc/logrotate.d/backup-scripts
/path/to/backups/*.log {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
}
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±—ç–∫–∞–ø–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –±—ç–∫–∞–ø–æ–≤
./backup_automation.sh --mode check -h 192.168.1.100 -k ~/.ssh/backup_key

# –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±—ç–∫–∞–ø–æ–≤
du -sh ./backups/*/ | sort -h
ls -la ./backups/*/ | wc -l

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –±—ç–∫–∞–ø–æ–≤
find ./backups -name "*.sha256" -exec sha256sum -c {} \;
```

### –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—Ç—Ä–µ–±—É–µ—Ç mailutils)
echo "–ë—ç–∫–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ" | mail -s "Backup Status" admin@example.com

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Nagios)
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:
cat > check_backup_status.sh << 'EOF'
#!/bin/bash
BACKUP_DIR="/mnt/backups"
LAST_BACKUP=$(find $BACKUP_DIR -name "*.meta" -mtime -1 | head -1)

if [[ -n "$LAST_BACKUP" ]]; then
    echo "OK: –ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞"
    exit 0
else
    echo "CRITICAL: –ë—ç–∫–∞–ø –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –±–æ–ª–µ–µ 24 —á–∞—Å–æ–≤"
    exit 2
fi
EOF
```

### –î–∞—à–±–æ—Ä–¥ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –¥–∞—à–±–æ—Ä–¥–∞
cat > backup_dashboard.sh << 'EOF'
#!/bin/bash
echo "=== –î–ê–®–ë–û–†–î –°–ò–°–¢–ï–ú–´ –ë–≠–ö–ê–ü–û–í ==="
echo "–í—Ä–µ–º—è: $(date)"
echo ""

echo "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—ç–∫–∞–ø–æ–≤:"
echo "–ü–æ–ª–Ω—ã–µ –±—ç–∫–∞–ø—ã: $(find ./backups -name "*full*" | wc -l)"
echo "–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ: $(find ./backups -name "*incremental*" | wc -l)"
echo "–î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ: $(find ./backups -name "*differential*" | wc -l)"
echo ""

echo "üíæ –†–∞–∑–º–µ—Ä –±—ç–∫–∞–ø–æ–≤:"
du -sh ./backups/*/ 2>/dev/null | sort -h
echo ""

echo "üïí –ü–æ—Å–ª–µ–¥–Ω–∏–µ –±—ç–∫–∞–ø—ã:"
find ./backups -name "*.meta" -exec cat {} \; | grep -E "(TIMESTAMP|BACKUP_DATE)" | sort -r | head -5
EOF

chmod +x backup_dashboard.sh
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. –û—à–∏–±–∫–∞ SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
**–°–∏–º–ø—Ç–æ–º—ã**: `ssh: connect to host 192.168.1.100 port 22: Connection refused`

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
ping -c 3 192.168.1.100

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –ø–æ—Ä—Ç–∞
telnet 192.168.1.100 22

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –∫–ª—é—á–µ–π
ssh-keygen -l -f ~/.ssh/backup_key
ssh -i ~/.ssh/backup_key -v root@192.168.1.100

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ SSH —Å–µ—Ä–≤–µ—Ä–∞
ssh root@192.168.1.100 "systemctl status sshd"
```

#### 2. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
**–°–∏–º–ø—Ç–æ–º—ã**: `No space left on device`

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
df -h

# –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
rm -rf /tmp/*
rm -rf /var/tmp/*

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∂–∞—Ç–∏—è xz –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞
./backup_system.sh -h 192.168.1.100 -c xz -k ~/.ssh/backup_key

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤
find ./backups -name "*.img.*" -mtime +30 -delete
```

#### 3. –û—à–∏–±–∫–∏ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏
**–°–∏–º–ø—Ç–æ–º—ã**: `dd: failed to open '/dev/sda': Permission denied`

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
ls -la /dev/sda

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–∞ –±—ç–∫–∞–ø–∞
sha256sum -c backup.img.gz.sha256

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
./restore_system.sh -b backup.img.gz -t 192.168.1.100 -d /dev/sda --dry-run

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
lsblk -o NAME,SIZE,TYPE,MOUNTPOINT
```

#### 4. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç–µ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
**–°–∏–º–ø—Ç–æ–º—ã**: –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–µ—Ç–∏
./restore_system.sh -b backup.img.gz -t 192.168.1.100 -d /dev/sda --skip-network

# –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏ –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
./network_config.sh -H webserver -i 192.168.1.100 -g 192.168.1.1

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
ssh root@192.168.1.100 "ip addr show"
ssh root@192.168.1.100 "cat /etc/hostname"
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–∫—Ä–∏–ø—Ç–æ–≤
tail -f /var/log/backup-system/backup-system.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä systemd –ª–æ–≥–æ–≤
journalctl -u backup-system.service -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä SSH –ª–æ–≥–æ–≤
tail -f /var/log/auth.log | grep ssh
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã
cd /path/to/backups
sha256sum -c *.sha256

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
cat *.meta

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
ls -lah *.img.*
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```bash
# –¢–µ—Å—Ç SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
ssh -i ~/.ssh/backup_key -o ConnectTimeout=10 root@192.168.1.100 "echo 'SSH OK'"

# –¢–µ—Å—Ç SCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
scp -i ~/.ssh/backup_key -o ConnectTimeout=10 /tmp/test.txt root@192.168.1.100:/tmp/

# –¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥
ssh -i ~/.ssh/backup_key root@192.168.1.100 "dd --version"
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

#### –ï—Å–ª–∏ –±—ç–∫–∞–ø –ø–æ–≤—Ä–µ–∂–¥–µ–Ω
```bash
# –ü–æ–ø—ã—Ç–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —á–∞—Å—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
gunzip -t backup.img.gz
xz -t backup.img.xz

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –±—ç–∫–∞–ø–∞
ls -t ./backups/*.img.* | head -2

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –±—ç–∫–∞–ø–∞
./backup_system.sh -h 192.168.1.100 -k ~/.ssh/backup_key -v
```

#### –ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ —Å Live CD/USB
# –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
mount /dev/sda1 /mnt
chroot /mnt

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞
grub-install /dev/sda
update-grub
```

## üêß –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—ã

### –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:
- **Debian/Ubuntu** - –ù–∞—Ç–∏–≤–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, systemd, apt
- **RHEL/CentOS** - NetworkManager, systemd, yum/dnf
- **Fedora** - NetworkManager, systemd, dnf

### –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:
- **Arch Linux** - systemd-networkd, pacman
- **openSUSE** - systemd-networkd, zypper
- **Gentoo** - systemd-networkd, emerge
- **Slackware** - –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:
```bash
# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞
cat /etc/os-release

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
systemctl status NetworkManager
systemctl status systemd-networkd

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç
which ip
which systemctl
which hostnamectl
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
- [SSH –∫–ª—é—á–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](https://www.ssh.com/academy/ssh/key)
- [Systemd —Ç–∞–π–º–µ—Ä—ã](https://systemd.io/TIMERS/)
- [Cron –∑–∞–¥–∞—á–∏](https://crontab.guru/)
- [DD –∫–æ–º–∞–Ω–¥–∞](https://man7.org/linux/man-pages/man1/dd.1.html)

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
- **rsync** - –î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤
- **tar** - –î–ª—è –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è
- **dd** - –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤ –¥–∏—Å–∫–æ–≤
- **ssh/scp** - –î–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

### –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–∞—Ö:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ issues
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π issue —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
3. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
4. –£–∫–∞–∂–∏—Ç–µ –≤–µ—Ä—Å–∏—é —Å–∏—Å—Ç–µ–º—ã –∏ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤

### –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é:
1. –û–ø–∏—à–∏—Ç–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
2. –û–±—ä—è—Å–Ω–∏—Ç–µ, –∫–∞–∫ —ç—Ç–æ —É–ª—É—á—à–∏—Ç —Å–∏—Å—Ç–µ–º—É
3. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ —Å–ø–æ—Å–æ–± —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–î–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è "–∫–∞–∫ –µ—Å—Ç—å" –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –≥–∞—Ä–∞–Ω—Ç–∏–π. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫.

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

#### 1. –°–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
tail -f /var/log/backup-system/backup-system.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
./script_name.sh --help

# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
./script_name.sh --verbose

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
./script_name.sh --dry-run
```

#### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
ssh -i ~/.ssh/backup_key root@server "echo 'Connection OK'"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
ls -la /dev/sda
id -u

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
df -h
```

#### 3. –û–±—Ä–∞—â–µ–Ω–∏–µ –∑–∞ –ø–æ–º–æ—â—å—é:
- **GitHub Issues** - –¥–ª—è –±–∞–≥–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- **–ü—Ä–∏–º–µ—Ä—ã** - –≥–æ—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–õ–æ–≥–∏** - –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º

### –ö–æ–Ω—Ç–∞–∫—Ç—ã:
- **Issues**: [GitHub Issues](https://github.com/Al1kOs/backup_script/issues)
- **Wiki**: [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://github.com/Al1kOs/backup_script/wiki)
- **Discussions**: [–û–±—Å—É–∂–¥–µ–Ω–∏—è](https://github.com/Al1kOs/backup_script/discussions)

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è Linux –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–π –∏ –≥–∏–±–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω—ã–º–∏ –∫–æ–ø–∏—è–º–∏ –≤–∞—à–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤. –° –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π, –≤—ã –º–æ–∂–µ—Ç–µ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–¥–µ–∂–Ω—É—é –∑–∞—â–∏—Ç—É –¥–∞–Ω–Ω—ã—Ö –∏ –±—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –ø–æ–Ω—è—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –±—ç–∫–∞–ø–æ–≤
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - SSH –∫–ª—é—á–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - cron –∏ systemd –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–∞—à–±–æ—Ä–¥—ã
- ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏

**–ù–∞—á–Ω–∏—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:**
```bash
# –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
make install

# –ü–µ—Ä–≤—ã–π –±—ç–∫–∞–ø
./backup_system.sh -h YOUR_SERVER_IP -k ~/.ssh/backup_key

# –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
make setup-automation
```


**–£–¥–∞—á–∏ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã –±—ç–∫–∞–ø–∞! üöÄ** 


